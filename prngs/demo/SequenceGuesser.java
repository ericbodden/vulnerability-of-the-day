// Copyright 2012 Andrew Meneely and Samuel Lucidi
// Licensed under the Educational Community License, Version 2.0 (the "License"); 
// you may not use this file except in compliance with the License. 
// You may obtain a copy of the License at http://www.osedu.org/licenses/ECL-2.0. 
// Unless required by applicable law or agreed to in writing, 
// software distributed under the License is distributed on an "AS IS" BASIS, 
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. 
// See the License for the specific language governing permissions 
// and limitations under the License.

import java.util.Random;
import java.util.Arrays;

public class SequenceGuesser {

	private static final int RAND_RANGE = 100;

	/**
	 * Loops through the seed range provided as first two
	 * command-line arguments, trying to find a seed that
	 * generates the same four element sequence that was provided
	 * as the last four command-line arguments.
	 *
	 * If a match is found, prints the 5th element in the sequence.
	 */
	public static void main(String[] args) {
		if (args.length != 6) {
			usage();
		}

		long start = Long.parseLong(args[0]);
		long end = Long.parseLong(args[1]);

		String[] sequence = Arrays.copyOfRange(args, 2, 6);
		System.out.println("Checking for a matching seed...");

		for (long seed = start; seed <= end; seed++) {
			Random random = new Random(seed);
			String[] guess = new String[4];
			for (int i = 0; i < 4; i++) {
				guess[i] = String.valueOf(random.nextInt(RAND_RANGE));
			}
			if (Arrays.equals(sequence, guess)) {
				System.out.println("Found it! Sequence generated using seed: " + seed);
				System.out.println("Next number in sequence is: " + random.nextInt(RAND_RANGE));
				System.exit(0);
			}
		}
		System.out.println("Couldn't determine seed used to generate sequence.");
	}

	/**
	 * Prints an informative usage message and then quits.
	 *
	 */
	public static void usage() {
		System.out.println("Usage: SequenceGuesser <seedrange start> <seedrange end> <1> <2> <3> <4>");
		System.exit(0);
	}

}